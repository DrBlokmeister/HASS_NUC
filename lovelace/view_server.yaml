##########################################  HERE BEGINS THE SERVER TAB  ##########################################
title: Server monitor
icon: 'mdi:server-network'
panel: false
badges: []
cards:
  - type: vertical-stack
    cards:
      - type: entity
        entity: sensor.airvpn_connected_since
        name: Connected Since
      - type: horizontal-stack
        cards:
          - type: entity
            entity: sensor.airvpn_server_name
            name: Server Name
          - type: entity
            entity: sensor.airvpn_server_country
            name: Server Country
      - type: horizontal-stack
        cards:
          - type: entity
            entity: sensor.airvpn_exit_ip
            name: Exit IP
          - type: entity
            entity: sensor.airvpn_vpn_ip
            name: VPN IP
      - type: custom:apexcharts-card
        header:
          title: Total Down/Up
        graph_span: 24h
        yaxis:
          - min: 0
            max: ~50
            decimals: 0
            apex_config:
              tickAmount: 4
              forceNiceScale: True
        series:
          - entity: sensor.airvpn_data_uploaded
            name: Data Uploaded
          - entity: sensor.airvpn_data_downloaded
            name: Data Downloaded
      - type: custom:apexcharts-card
        header:
          title: Current Down/Up Speed
        graph_span: 24h
        yaxis:
          - min: 0
            max: ~10
            decimals: 0
            apex_config:
              tickAmount: 4
              forceNiceScale: True
        series:
          - entity: sensor.airvpn_upload_speed
            name: Upload Speed
          - entity: sensor.airvpn_download_speed
            name: Download Speed
  
  # - type: conditional
  #   conditions:
  #     - entity: switch.blokmeisternas
  #       state: "off"
  #   card:
  #     type: vertical-stack
  #     cards:
  #       - type: markdown
  #         content: >
  #           ## <center>NAS is Offline</center>
  #       - type: glance
  #         entities:
  #           - switch.blokmeisternas
  # - cards:
  #     - entities:
  #         - entity: sensor.nas_parity_temperature
  #           name: Parity
  #         - entity: sensor.nas_disk1_temperature
  #           name: Disk 1
  #         - entity: sensor.nas_disk2_temperature
  #           name: Disk 2
  #         - entity: sensor.nas_disk3_temperature
  #           name: Disk 3
  #         - entity: sensor.nas_dev1_temperature
  #           name: Dev 1
  #         - entity: sensor.nas_dev2_temperature
  #           name: Dev 2
  #         - entity: sensor.nas_cache_temperature
  #           name: Cache
  #       icon: mdi:harddisk
  #       name: Disk temperatures
  #       hours_to_show: 48
  #       points_per_hour: 12
  #       hour24: true
  #       font_size: 70
  #       height: 250
  #       line_width: 2.5
  #       lower_bound: 20
  #       upper_bound: 50
  #       show:
  #         labels: true
  #         average: true
  #       type: custom:mini-graph-card
  #     - entities:
  #         - entity: sensor.nas_parity_temperature
  #           name: Parity
  #           icon: 'mdi:harddisk'
  #         - entity: sensor.nas_disk1_temperature
  #           name: Disk 1
  #           icon: 'mdi:harddisk'
  #         - entity: sensor.nas_disk2_temperature
  #           name: Disk 2
  #           icon: 'mdi:harddisk'
  #         - entity: sensor.nas_disk3_temperature
  #           name: Disk 3
  #           icon: 'mdi:harddisk'
  #         - entity: sensor.nas_dev1_temperature
  #           name: Dev 1
  #           icon: 'mdi:harddisk'
  #         - entity: sensor.nas_dev2_temperature
  #           name: Dev 2
  #           icon: 'mdi:harddisk'
  #         - entity: sensor.nas_cache_temperature
  #           name: Cache
  #           icon: 'mdi:harddisk'
  #         # - entity: sensor.nas_disk_ada7_temperature
  #         #   name: ada7
  #         #   icon: 'mdi:harddisk'
  #         # - entity: sensor.nas_disk_da0_temperature
  #         #   name: da0
  #         #   icon: 'mdi:harddisk'
  #         # - entity: sensor.nas_disk_da1_temperature
  #         #   name: da1
  #         #   icon: 'mdi:harddisk'
  #       columns: 4
  #       type: glance
  #   type: vertical-stack
  # - cards:
  #     - entities:
  #         - entity: sensor.nas_core0_temperature
  #           name: Core0
  #         - entity: sensor.nas_core1_temperature
  #           name: Core1
  #         - entity: sensor.nas_core2_temperature
  #           name: Core2
  #         - entity: sensor.nas_core3_temperature
  #           name: Core3
  #         - entity: sensor.glances_package_id_0_temperature
  #           name: Package
  #       name: CPU temperature
  #       hours_to_show: 48
  #       points_per_hour: 12
  #       hour24: true
  #       font_size: 70
  #       height: 250
  #       line_width: 2.5
  #       lower_bound: 20
  #       upper_bound: 50
  #       show:
  #         labels: true
  #         average: true
  #       type: custom:mini-graph-card
  #     - entities:
  #         - entity: sensor.glances_cpu_used
  #           name: Total
  #         - entity: sensor.glances_containers_cpu_used
  #           name: Containers
  #       name: NAS Load
  #       hours_to_show: 48
  #       points_per_hour: 12
  #       hour24: true
  #       font_size: 70
  #       height: 250
  #       line_width: 2.5
  #       lower_bound: 0
  #       upper_bound: 100
  #       show:
  #         labels: true
  #         average: true
  #       type: custom:mini-graph-card
  #   type: vertical-stack
  - cards:
      - type: entities
        entities:
          # - entity: sensor.fn_version
          #   icon: none
          #   name: Version
          # - entity: sensor.fn_alert_message
          #   icon: none
          #   name: msg
          # - entity: switch.blokmeisternas
          #   tap_action:
          #     action: toggle
          #     confirmation:
          #       text: Are you sure you want to power on/off?
          #   name: Power
          #   icon: mdi:server-network
          # - entity: sensor.nas_last_boot
          #   name: Last boot
          - entity: sensor.blitzwolf_nas_energy_power
            name: Power
    type: vertical-stack

      # - entities:
      #     - entity: switch.blokmeisternas
      #       tap_action:
      #         action: toggle
      #         confirmation:
      #           text: Are you sure you want to power on/off?
      #       name: Power
      #       icon: mdi:server-network
          # - entity: sensor.fn_alert_level
          #   name: Alert
          #   icon: 'mdi:alert'
          # - entity: sensor.fn_version
          #   name: Version
          # - entity: sensor.fn_newstorage_report
          #   name: NewStorage
          # - entity: sensor.fn_newstorage_pct_used
          #   name: Newstorage
          #   icon: 'mdi:harddisk'
          # - entity: sensor.fn_storage2_pct_used
          #   name: Storage2
          #   icon: 'mdi:harddisk'

        # theme: Backend-selected
        # type: glance
      # - entities:
      #     - entity: sensor.fn_newstorage_report
      #       name: NewStorage
      #       icon: 'mdi:harddisk'
      #     - entity: sensor.fn_storage2_report
      #       name: Storage2
      #       icon: 'mdi:harddisk'
      #     - entity: sensor.nas_swap_use
      #       name: Swap Use
      #       icon: 'mdi:harddisk'
      #     - entity: sensor.fn_newstorage_pct_used
      #       name: NewStorage
      #       icon: 'mdi:harddisk'
      #     - entity: sensor.fn_storage2_pct_used
      #       name: Storage2
      #       icon: 'mdi:harddisk'
      #     - entity: sensor.nas_memory_use_percent
      #       name: Memory use
      #       icon: 'mdi:memory'
      #   theme: Backend-selected
      #   columns: 3
      #   type: glance


  - cards:
      - entities:
        - entity: sensor.transmission_down_speed
          name: Transmission down
        - entity: sensor.transmission_up_speed
          name: Transmission up
        icon: mdi:harddisk
        name: Transmission speed
        hours_to_show: 48
        points_per_hour: 12
        hour24: true
        font_size: 70
        height: 250
        line_width: 3.5
        lower_bound: 0
        upper_bound: 50
        show:
          labels: true
          average: true
        type: custom:mini-graph-card
      # - entities:
      #     - entity: sensor.ping_router_avg
      #     - entity: sensor.ping_blokmeisternas_avg
      #     - entity: sensor.ping_phone_avg
      #     - entity: sensor.ping_odroid_c2_avg
      #     - entity: sensor.ping_ambilight_rpi_avg
      #     - entity: sensor.ping_transmission_avg
      #     - entity: sensor.ping_plinq_avg
      #     - entity: sensor.ping_google_dns_avg
      #       hours_to_show: 168
      #   type: history-graph
      - entities:
          - entity: sensor.ping_router_avg
          - entity: sensor.ping_blokmeisternas_avg
          - entity: sensor.ping_phone_avg
          - entity: sensor.ping_odroid_c2_avg
          - entity: sensor.ping_ambilight_rpi_avg
          - entity: sensor.ping_snlr_avg
          - entity: sensor.ping_google_dns_avg
        name: Ping
        hours_to_show: 48
        points_per_hour: 12
        hour24: true
        font_size: 70
        height: 250
        line_width: 2.5
        lower_bound: 0.5
        upper_bound: 1000
        logarithmic: true
        align_icon: right
        align_state: center
        icon: mdi:speedometer
        show:
          fill: false
          labels: false
          average: false
          points: hover
          legend: false
        type: custom:mini-graph-card
    type: vertical-stack
  - cards:
      - columns: 4
        entities:
          - entity: sensor.udmp_download_gb
            icon: 'mdi:progress-download'
            name: Down Daily
          - entity: sensor.udmp_download_speed_mbs
            icon: 'mdi:speedometer'
            name: Down Speed
          - entity: sensor.udmp_upload_gb
            icon: 'mdi:progress-upload'
            name: Up Daily
          - entity: sensor.udmp_upload_speed_mbs
            icon: 'mdi:speedometer'
            name: Up Speed
          - entity: sensor.speedtest_download
          - entity: sensor.speedtest_upload
          - entity: sensor.speedtest_ping
          - type: button
            entity: sensor.speedtest_download
            icon: mdi:reload
            name: Reload
            action_name: Reload Speedtest
            tap_action:
              action: call-service
              service: homeassistant.reload_config_entry
              service_data:
                target:
                  device_id: 5339147a29211a8fe30012ef2f3b9fe1
        show_icon: true
        show_name: true
        show_state: true
        title: Asus Router status
        type: glance
      - entities:
          - entity: sensor.speedtest_download
            name: Down
          - entity: sensor.speedtest_upload
            name: Up
          - entity: sensor.speedtest_ping
            name: Ping
            y_axis: 'secondary'
        icon: mdi:swap-vertical-bold
        name: Speedtest
        hours_to_show: 48
        points_per_hour: 1
        hour24: true
        font_size: 70
        height: 250
        line_width: 2.5
        lower_bound: 300
        upper_bound: 1000
        lower_bound_secondary: 0
        upper_bound_secondary: 20
        show:
          labels: true
          average: true
          labels_secondary: true
        type: custom:mini-graph-card
      - entities:
          - entity: sensor.udmp_download_speed_mbs
            name: Down
          - entity: sensor.udmp_upload_speed_mbs
            name: Up
        icon: mdi:swap-vertical-bold
        name: Router
        hours_to_show: 48
        points_per_hour: 5
        hour24: true
        font_size: 70
        height: 250
        line_width: 2.5
        show:
          labels: true
        type: custom:mini-graph-card
    type: vertical-stack

  - type: vertical-stack
    cards:
      # Show Docker Version
      - type: markdown
        content: |
          # NAS Docker Containers
          ### Docker Version
          {{ state_attr('sensor.nas_portainer_endpoints_local', 'Dockerversion') }}
      # Dynamic display of running Docker containers
      # Display important containers always
      - type: history-graph
        title: Important Docker Containers History
        hours_to_show: 24  # Adjust based on how much history you want to display
        refresh_interval: 60  # Refresh every minute
        entities:
          - entity: sensor.nas_portainer_apacheguacamole
            name: Guacamole
            icon: mdi:remote-desktop
          - entity: sensor.nas_portainer_firefox
            name: Firefox
            icon: mdi:firefox
          - entity: sensor.nas_portainer_glances
            name: Glances
            icon: mdi:eye-circle-outline
          - entity: sensor.nas_portainer_hddtemp
            name: HDDTemp
            icon: mdi:harddisk
          - entity: sensor.nas_portainer_ntp
            name: NTP
            icon: mdi:clock-outline
          - entity: sensor.nas_portainer_onedrive
            name: OneDrive
            icon: mdi:cloud-outline
          - entity: sensor.nas_portainer_photoprism
            name: PhotoPrism
            icon: mdi:folder-multiple-image
          - entity: sensor.nas_portainer_plex
            name: Plex
            icon: mdi:plex
          - entity: sensor.nas_portainer_portainer_ce
            name: Portainer CE
            icon: mdi:docker
          - entity: sensor.nas_portainer_transmission
            name: Transmission
            icon: mdi:transmission-tower
      - type: entity-filter
        entities:
          - entity: sensor.nas_portainer_apacheguacamole
            name: Apache Guacamole
            icon: mdi:remote-desktop
          - entity: sensor.nas_portainer_diskspeed
            name: DiskSpeed
            icon: mdi:speedometer
          - entity: sensor.nas_portainer_dupeguru
            name: DupeGuru
            icon: mdi:file-find-outline
          - entity: sensor.nas_portainer_firefox
            name: Firefox
            icon: mdi:firefox
          - entity: sensor.nas_portainer_glances
            name: Glances
            icon: mdi:eye-circle-outline
          - entity: sensor.nas_portainer_grafana
            name: Grafana
            icon: mdi:chart-areaspline
          - entity: sensor.nas_portainer_hddtemp
            name: HDDTemp
            icon: mdi:thermometer-lines
          - entity: sensor.nas_portainer_influxdb
            name: InfluxDB
            icon: mdi:database
          - entity: sensor.nas_portainer_influxdb_1_8
            name: InfluxDB 1.8
            icon: mdi:database-plus
          - entity: sensor.nas_portainer_iperf3
            name: iPerf3
            icon: mdi:speedometer
          - entity: sensor.nas_portainer_jackett
            name: Jackett
            icon: mdi:lifebuoy
          - entity: sensor.nas_portainer_lidarr
            name: Lidarr
            icon: mdi:music
          - entity: sensor.nas_portainer_musicbrainz_picard
            name: MusicBrainz Picard
            icon: mdi:music-circle
          - entity: sensor.nas_portainer_ntp
            name: NTP
            icon: mdi:clock-outline
          - entity: sensor.nas_portainer_onedrive
            name: OneDrive
            icon: mdi:cloud-outline
          - entity: sensor.nas_portainer_photoprism
            name: PhotoPrism
            icon: mdi:image-multiple
          - entity: sensor.nas_portainer_plex
            name: Plex
            icon: mdi:plex
          - entity: sensor.nas_portainer_portainer_ce
            name: Portainer CE
            icon: mdi:docker
          - entity: sensor.nas_portainer_qdirstat
            name: QDirStat
            icon: mdi:folder-outline
          - entity: sensor.nas_portainer_readarr
            name: Readarr
            icon: mdi:book-open-page-variant
          - entity: sensor.nas_portainer_sonarr
            name: Sonarr
            icon: mdi:television-classic
          - entity: sensor.nas_portainer_tasmobackup
            name: TasmoBackup
            icon: mdi:backup-restore
          - entity: sensor.nas_portainer_telegraf
            name: Telegraf
            icon: mdi:graph-outline
          - entity: sensor.nas_portainer_transmission
            name: Transmission
            icon: mdi:transmission-tower
          - entity: sensor.nas_portainer_unraid_api_re
            name: Unraid API
            icon: mdi:server-network
          - entity: sensor.nas_portainer_upsnap
            name: UPSnap
            icon: mdi:camera-timer
        state_filter:
          - "running"
        card:
          type: entities
          title: Running Docker Containers

  - type: glance
    title: Study Desk Powerstrip
    columns: 4
    show_state: false
    entities:
    - entity: switch.study_shp9_powerstrip_socket_pc
      name: PC
      icon: mdi:desktop-tower
      tap_action:
        action: toggle
        confirmation:
          text: Are you sure you want to power on/off?
    - entity: switch.study_shp9_powerstrip_socket_dock
      name: Laptop Dock
      icon: mdi:laptop
      tap_action:
        action: toggle
    - entity: switch.study_shp9_powerstrip_socket_peripherals
      name: Peripherals
      icon: mdi:monitor
      tap_action:
        action: toggle
    - entity: switch.study_shp9_powerstrip_usb_socket
      name: USB
      icon: mdi:usb
      tap_action:
        action: toggle
    - entity: script.turn_off_all_study_desk_devices
      name: ALL
      icon: mdi:desktop-tower-monitor
      tap_action:
        action: call-service
        service: script.turn_off_all_study_desk_devices
        confirmation:
          text: Are you sure you want to power off?
