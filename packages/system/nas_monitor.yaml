homeassistant:
  customize: {}

##############
#    REST    #
##############
rest:
  - resource: !secret airvpn_API_resource
    headers:
      API-KEY: !secret airvpn_API_key
    scan_interval: 60  # Set the desired update interval in seconds
    sensor:
      - name: "AirVPN exit IP"
        unique_id: "yaml_restful_airvpn_exit_ip_new"
        value_template: >-
          {% if value_json is defined and value_json.sessions is defined and value_json.sessions | length > 0 %}
            {{ value_json.sessions[0].exit_ip }}
          {% else %}
            'unavailable'
          {% endif %}
        icon: "mdi:ip-network-outline"
      - name: "AirVPN Username"
        unique_id: "yaml_restful_airvpn_username"
        value_template: >-
          {% if value_json is defined and value_json.user is defined %}
            {{ value_json.user.login }}
          {% else %}
            'unavailable'
          {% endif %}
        icon: "mdi:account"
      - name: "AirVPN VPN IP"
        unique_id: "yaml_restful_airvpn_vpn_ip"
        value_template: >-
          {% if value_json is defined and value_json.connection is defined %}
            {{ value_json.connection.vpn_ip }}
          {% else %}
            'unavailable'
          {% endif %}
        icon: "mdi:ip-network-outline"
      - name: "AirVPN Exit IP"
        unique_id: "yaml_restful_airvpn_exit_ip"
        value_template: >-
          {% if value_json is defined and value_json.connection is defined %}
            {{ value_json.connection.exit_ip }}
          {% else %}
            'unavailable'
          {% endif %}
        icon: "mdi:ip-network-outline"
      - name: "AirVPN Entry IP"
        unique_id: "yaml_restful_airvpn_entry_ip"
        value_template: >-
          {% if value_json is defined and value_json.connection is defined %}
            {{ value_json.connection.entry_ip }}
          {% else %}
            'unavailable'
          {% endif %}
        icon: "mdi:ip-network-outline"
      - name: "AirVPN Server Name"
        unique_id: "yaml_restful_airvpn_server_name"
        value_template: >-
          {% if value_json is defined and value_json.connection is defined %}
            {{ value_json.connection.server_name }}
          {% else %}
            'unavailable'
          {% endif %}
        icon: "mdi:server"
      - name: "AirVPN Server Country"
        unique_id: "yaml_restful_airvpn_server_country"
        value_template: >-
          {% if value_json is defined and value_json.connection is defined %}
            {{ value_json.connection.server_country }}
          {% else %}
            'unavailable'
          {% endif %}
        icon: "mdi:earth"
      - name: "AirVPN Data Uploaded"
        unique_id: "yaml_restful_airvpn_data_uploaded"
        value_template: >-
          {% if value_json is defined and value_json.connection is defined %}
            {{ (value_json.connection.bytes_read/(1024*1024*1024))|round(2) }}
          {% else %}
            'unavailable'
          {% endif %}
        device_class: data_size
        unit_of_measurement: GB
        icon: "mdi:upload-network-outline"
      - name: "AirVPN Data Downloaded"
        unique_id: "yaml_restful_airvpn_data_downloaded"
        value_template: >-
          {% if value_json is defined and value_json.connection is defined %}
            {{ (value_json.connection.bytes_write/(1024*1024*1024))|round(2) }}
          {% else %}
            'unavailable'
          {% endif %}
        device_class: data_size
        unit_of_measurement: GB
        icon: "mdi:download-network-outline"
      - name: "AirVPN Connected Since"
        unique_id: "yaml_restful_airvpn_connected_since"
        value_template: >-
          {% if value_json is defined and value_json.connection is defined %}
            {{ as_datetime(value_json.connection.connected_since_unix) }}
          {% else %}
            'unavailable'
          {% endif %}
        device_class: timestamp
        icon: "mdi:timer-sand"
      - name: "AirVPN Upload Speed"
        unique_id: "yaml_restful_airvpn_upload_speed"
        value_template: >-
          {% if value_json is defined and value_json.connection is defined %}
            {{ (value_json.connection.speed_read/(1024*1024))|round(2) }}
          {% else %}
            'unavailable'
          {% endif %}
        device_class: data_rate
        unit_of_measurement: MB/s
        icon: "mdi:upload-network"
      - name: "AirVPN Download Speed"
        unique_id: "yaml_restful_airvpn_download_speed"
        value_template: >-
          {% if value_json is defined and value_json.connection is defined %}
            {{ (value_json.connection.speed_write/(1024*1024))|round(2) }}
          {% else %}
            'unavailable'
          {% endif %}
        device_class: data_rate
        unit_of_measurement: MB/s
        icon: "mdi:download-network"

######################
#    COMMAND LINE    #
######################
command_line:
  - switch: #Transmission
      unique_id: "yaml_command_line_switch_transmission_container"
      name: "Transmission Container"
      icon: "mdi:car-shift-pattern"
      command_on: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker start transmission"
      command_off: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker stop transmission"
      command_state: >-
        cat /config/www/nas_status.json | jq -r '.transmission_container_state'
      value_template: "{{ value == 'true' or value == true }}"
      availability: >-
        {{ states('binary_sensor.nas_ssh_reachability') }}
  - switch: #Plex
      unique_id: "yaml_command_line_switch_plex_container"
      name: "Plex Container"
      icon: "mdi:plex"
      command_on: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker start plex"
      command_off: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker stop plex"
      command_state: >-
        cat /config/www/nas_status.json | jq -r '.plex_container_state'
      value_template: "{{ value == 'true' or value == true }}"
      availability: >-
        {{ states('binary_sensor.nas_ssh_reachability') }}
  # - switch: #Portainer
  #     unique_id: "yaml_command_line_switch_portainer_ce_container"
  #     name: "Portainer CE Container"
  #     icon: "mdi:docker"
  #     command_on: >-
  #       ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
  #       root@10.0.0.250
  #       "docker start Portainer-CE"
  #     command_off: >-
  #       ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
  #       root@10.0.0.250
  #       "docker stop Portainer-CE"
  #     command_state: >-
  #       cat /config/www/nas_status.json | jq -r '."Portainer-CE_container_state"'
  #     value_template: "{{ value == 'true' or value == true }}"
  #     availability: >-
  #       {{ states('binary_sensor.nas_ssh_reachability') }}
  - switch: #Firefox
      unique_id: "yaml_command_line_switch_firefox_container"
      name: "Firefox Container"
      icon: "mdi:firefox"
      command_on: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker start Firefox"
      command_off: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker stop Firefox"
      command_state: >-
        cat /config/www/nas_status.json | jq -r '.Firefox_container_state'
      value_template: "{{ value == 'true' or value == true }}"
      availability: >-
        {{ states('binary_sensor.nas_ssh_reachability') }}
  - switch: #ApacheGuacamole
      unique_id: "yaml_command_line_switch_apache_guacamole_container"
      name: "Apache Guacamole Container"
      icon: "mdi:application"
      command_on: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker start ApacheGuacamole"
      command_off: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker stop ApacheGuacamole"
      command_state: >-
        cat /config/www/nas_status.json | jq -r '.ApacheGuacamole_container_state'
      value_template: "{{ value == 'true' or value == true }}"
      availability: >-
        {{ states('binary_sensor.nas_ssh_reachability') }}
  - switch: #PhotoPrism
      unique_id: "yaml_command_line_switch_photoprism_container"
      name: "PhotoPrism Container"
      icon: "mdi:image-multiple"
      command_on: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker start PhotoPrism"
      command_off: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker stop PhotoPrism"
      command_state: >-
        cat /config/www/nas_status.json | jq -r '.PhotoPrism_container_state'
      value_template: "{{ value == 'true' or value == true }}"
      availability: >-
        {{ states('binary_sensor.nas_ssh_reachability') }}
  - switch: #Onedrive
      unique_id: "yaml_command_line_switch_onedrive_container"
      name: "OneDrive Container"
      icon: "mdi:cloud-outline"
      command_on: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker start Onedrive"
      command_off: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker stop Onedrive"
      command_state: >-
        cat /config/www/nas_status.json | jq -r '.Onedrive_container_state'
      value_template: "{{ value == 'true' or value == true }}"
      availability: >-
        {{ states('binary_sensor.nas_ssh_reachability') }}
  - switch: #HDDTemp
      unique_id: "yaml_command_line_switch_hddtemp_container"
      name: "HDDTemp Container"
      icon: "mdi:harddisk"
      command_on: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker start HDDTemp"
      command_off: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker stop HDDTemp"
      command_state: >-
        cat /config/www/nas_status.json | jq -r '.HDDTemp_container_state'
      value_template: "{{ value == 'true' or value == true }}"
      availability: >-
        {{ states('binary_sensor.nas_ssh_reachability') }}
  - switch: #Glances
      unique_id: "yaml_command_line_switch_glances_container"
      name: "Glances Container"
      icon: "mdi:eye-settings"
      command_on: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker start glances"
      command_off: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker stop glances"
      command_state: >-
        cat /config/www/nas_status.json | jq -r '.glances_container_state'
      value_template: "{{ value == 'true' or value == true }}"
      availability: >-
        {{ states('binary_sensor.nas_ssh_reachability') }}
  - switch: #NTP
      unique_id: "yaml_command_line_switch_ntp_container"
      name: "NTP Container"
      icon: "mdi:clock"
      command_on: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker start ntp"
      command_off: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker stop ntp"
      command_state: >-
        cat /config/www/nas_status.json | jq -r '.ntp_container_state'
      value_template: "{{ value == 'true' or value == true }}"
      availability: >-
        {{ states('binary_sensor.nas_ssh_reachability') }}
  - switch: #SWAG
      unique_id: "yaml_command_line_switch_swag_container"
      name: "SWAG Container"
      icon: "mdi:shield-account"
      command_on: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker start swag"
      command_off: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        "docker stop swag"
      command_state: >-
        cat /config/www/nas_status.json | jq -r '.swag_container_state'
      value_template: "{{ value == 'true' or value == true }}"
      availability: >-
        {{ states('binary_sensor.nas_ssh_reachability') }}

  - switch:
      unique_id: "unraid_array_control"
      name: "NAS Unraid Array"
      icon: "mdi:harddisk"
      command_on: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no
        -q root@10.0.0.250
        '/usr/local/sbin/emcmd startarray'
      command_off: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no
        -q root@10.0.0.250
        '/usr/local/sbin/emcmd stoparray'
      command_state: >-
        cat /config/www/nas_status.json | jq -r '.unraid_array_status'
      value_template: "{{ value == 'true' or value == true }}"
      availability: >-
        {{ states('binary_sensor.nas_ssh_reachability') }}
  - switch:
      unique_id: "wireguard_service_control"
      name: "NAS Wireguard Service"
      icon: "mdi:vpn"
      command_on: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no -q
        root@10.0.0.250
        '/etc/rc.d/rc.wireguard start'
      command_off: >-
        ssh -i /config/.ssh/NUC_id_rsa -o StrictHostKeyChecking=no
        -q root@10.0.0.250
        '/etc/rc.d/rc.wireguard stop'
      command_state: >-
        cat /config/www/nas_status.json | jq -r '.wireguard_service_status'
      value_template: "{{ value == 'true' or value == true }}"
      availability: >-
        {{ states('binary_sensor.nas_ssh_reachability') }}

  - binary_sensor:
      name: "NAS SSH Reachability"
      command: "cat /config/www/nas_status.json | jq -r '.nas_available'"
      payload_on: "true"
      payload_off: "false"
      device_class: connectivity

  - sensor:
      name: "NAS CPU Usage File"
      icon: mdi:cpu-64-bit
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: "{{ value_json.get('cpu_usage', 0) }}"
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "NAS CPU Temperature File"
      icon: mdi:thermometer
      unit_of_measurement: '°C'
      command: "cat /config/www/nas_status.json"
      value_template: "{{ value_json.get('cpu_temperature', 0) }}"
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "NAS Total Memory File"
      icon: mdi:memory
      unit_of_measurement: 'MB'
      command: "cat /config/www/nas_status.json"
      value_template: "{{ value_json.get('total_memory', 0) }}"
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "NAS Used Memory File"
      icon: mdi:memory
      unit_of_measurement: 'MB'
      command: "cat /config/www/nas_status.json"
      value_template: "{{ value_json.get('used_memory', 0) }}"
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "NAS Link Speed"
      unit_of_measurement: 'Mb/s'
      command: "cat /config/www/nas_status.json"
      value_template: "{{ value_json.get('link_speed', '0Mb/s').split('Mb/s')[0] }}"
      icon: mdi:speedometer
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "NAS Used Disk Space File"
      icon: mdi:harddisk
      unit_of_measurement: 'GB'
      command: "cat /config/www/nas_status.json"
      value_template: "{{ value_json.get('used_disk_space', 0) }}"
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "NAS NVMe Composite Temperature File"
      icon: mdi:thermometer
      unit_of_measurement: '°C'
      command: "cat /config/www/nas_status.json"
      value_template: "{{ value_json.get('nvme_composite_temperature', 0) }}"
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "NAS Parity Temperature File"
      icon: mdi:harddisk
      unit_of_measurement: '°C'
      command: "cat /config/www/nas_status.json"
      value_template: "{{ value_json.get('parity_temperature', 0) }}"
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "NAS Disk 1 Temperature File"
      icon: mdi:harddisk
      unit_of_measurement: '°C'
      command: "cat /config/www/nas_status.json"
      value_template: "{{ value_json.get('disk_1_temperature', 0) }}"
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "NAS Disk 2 Temperature File"
      icon: mdi:harddisk
      unit_of_measurement: '°C'
      command: "cat /config/www/nas_status.json"
      value_template: "{{ value_json.get('disk_2_temperature', 0) }}"
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "NAS Disk 3 Temperature File"
      icon: mdi:harddisk
      unit_of_measurement: '°C'
      command: "cat /config/www/nas_status.json"
      value_template: "{{ value_json.get('disk_3_temperature', 0) }}"
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "NAS Dev 1 Temperature File"
      icon: mdi:harddisk
      unit_of_measurement: '°C'
      command: "cat /config/www/nas_status.json"
      value_template: "{{ value_json.get('dev_1_temperature', 0) }}"
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "NAS Dev 2 Temperature File"
      icon: mdi:harddisk
      unit_of_measurement: '°C'
      command: "cat /config/www/nas_status.json"
      value_template: "{{ value_json.get('dev_2_temperature', 0) }}"
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"

  - sensor:
      name: "Transmission CPU Usage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('transmission_cpu_usage', 'Unavailable') is number %}
          {{ value_json.get('transmission_cpu_usage', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:cpu-64-bit
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "Transmission Memory Usage"
      unit_of_measurement: 'GB'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% set mem_usage = value_json.get('transmission_mem_usage', '0B') %}
        {% set value = mem_usage | regex_replace('([^0-9.]+)', '') | float(0) %}
        {% set unit = mem_usage | regex_replace('([0-9.]+)', '') %}
        {% if unit == 'MiB' %}
          {{ '%0.3f' | format(value / 1024) }}
        {% elif unit == 'GiB' %}
          {{ '%0.3f' | format(value) }}
        {% elif unit == 'KiB' %}
          {{ '%0.3f' | format(value / (1024 * 1024)) }}
        {% elif unit == 'B' %}
          {{ '%0.3f' | format(value / (1024 * 1024 * 1024)) }}
        {% else %}
          {{ '-1' | format(0) }}
        {% endif %}
      icon: mdi:memory
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "Transmission Memory Usage Percentage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: "{{ value_json.get('transmission_mem_perc', 0) }}"
      icon: mdi:percent
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "Plex CPU Usage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('plex_cpu_usage', 'Unavailable') is number %}
          {{ value_json.get('plex_cpu_usage', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:cpu-64-bit
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "Plex Memory Usage"
      unit_of_measurement: 'GB'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% set mem_usage = value_json.plex_mem_usage %}
        {% set value = mem_usage | regex_replace('([^0-9.]+)', '') | float(0) %}
        {% set unit = mem_usage | regex_replace('([0-9.]+)', '') %}
        {% if unit == 'MiB' %}
          {{ '%0.3f' | format(value / 1024) }}
        {% elif unit == 'GiB' %}
          {{ '%0.3f' | format(value) }}
        {% elif unit == 'KiB' %}
          {{ '%0.3f' | format(value / (1024 * 1024)) }}
        {% elif unit == 'B' %}
          {{ '%0.3f' | format(value / (1024 * 1024 * 1024)) }}
        {% else %}
          {{ '-1' | format(0) }}
        {% endif %}
      icon: mdi:memory
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "Plex Memory Usage Percentage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('plex_mem_perc', 'Unavailable') is number %}
          {{ value_json.get('plex_mem_perc', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:percent
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  # - sensor:
  #     name: "Portainer-CE CPU Usage"
  #     unit_of_measurement: '%'
  #     command: "cat /config/www/nas_status.json"
  #     value_template: >
  #       {% if value_json.get('Portainer-CE_cpu_usage', 'Unavailable') is number %}
  #         {{ value_json.get('Portainer-CE_cpu_usage', 'Unavailable') }}
  #       {% else %}
  #         -1
  #       {% endif %}
  #     icon: mdi:cpu-64-bit
  #     availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  # - sensor:
  #     name: "Portainer-CE Memory Usage"
  #     unit_of_measurement: 'GB'
  #     command: "cat /config/www/nas_status.json"
  #     value_template: >
  #       {% set mem_usage = value_json.get('Portainer-CE_mem_usage', '0B') %}
  #       {% set value = mem_usage | regex_replace('([^0-9.]+)', '') | float(0) %}
  #       {% set unit = mem_usage | regex_replace('([0-9.]+)', '') %}
  #       {% if unit == 'MiB' %}
  #         {{ '%0.3f' | format(value / 1024) }}
  #       {% elif unit == 'GiB' %}
  #         {{ '%0.3f' | format(value) }}
  #       {% elif unit == 'KiB' %}
  #         {{ '%0.3f' | format(value / (1024 * 1024)) }}
  #       {% elif unit == 'B' %}
  #         {{ '%0.3f' | format(value / (1024 * 1024 * 1024)) }}
  #       {% else %}
  #         {{ '-1' }}  # Fallback in case unit is not recognized
  #       {% endif %}
  #     icon: mdi:memory
  #     availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  # - sensor:
  #     name: "Portainer-CE Memory Usage Percentage"
  #     unit_of_measurement: '%'
  #     command: "cat /config/www/nas_status.json"
  #     value_template: >
  #       {% if value_json.get('Portainer-CE_mem_perc', 'Unavailable') is number %}
  #         {{ value_json.get('Portainer-CE_mem_perc', 'Unavailable') }}
  #       {% else %}
  #         -1
  #       {% endif %}
  #     icon: mdi:percent
  #     availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "Firefox CPU Usage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('Firefox_cpu_usage', 'Unavailable') is number %}
          {{ value_json.get('Firefox_cpu_usage', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:cpu-64-bit
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "Firefox Memory Usage"
      unit_of_measurement: 'GB'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% set mem_usage = value_json.get('Firefox_mem_usage', '0B') %}
        {% set value = mem_usage | regex_replace('([^0-9.]+)', '') | float(0) %}
        {% set unit = mem_usage | regex_replace('([0-9.]+)', '') %}
        {% if unit == 'MiB' %}
          {{ '%0.3f' | format(value / 1024) }}
        {% elif unit == 'GiB' %}
          {{ '%0.3f' | format(value) }}
        {% elif unit == 'KiB' %}
          {{ '%0.3f' | format(value / (1024 * 1024)) }}
        {% elif unit == 'B' %}
          {{ '%0.3f' | format(value / (1024 * 1024 * 1024)) }}
        {% else %}
          {{ '-1' }}  # Fallback in case unit is not recognized
        {% endif %}
      icon: mdi:memory
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "Firefox Memory Usage Percentage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('Firefox_mem_perc', 'Unavailable') is number %}
          {{ value_json.get('Firefox_mem_perc', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:percent
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "ApacheGuacamole CPU Usage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('ApacheGuacamole_cpu_usage', 'Unavailable') is number %}
          {{ value_json.get('ApacheGuacamole_cpu_usage', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:cpu-64-bit
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "ApacheGuacamole Memory Usage"
      unit_of_measurement: 'GB'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% set mem_usage = value_json.get('ApacheGuacamole_mem_usage', '0B') %}
        {% set value = mem_usage | regex_replace('([^0-9.]+)', '') | float(0) %}
        {% set unit = mem_usage | regex_replace('([0-9.]+)', '') %}
        {% if unit == 'MiB' %}
          {{ '%0.3f' | format(value / 1024) }}
        {% elif unit == 'GiB' %}
          {{ '%0.3f' | format(value) }}
        {% elif unit == 'KiB' %}
          {{ '%0.3f' | format(value / (1024 * 1024)) }}
        {% elif unit == 'B' %}
          {{ '%0.3f' | format(value / (1024 * 1024 * 1024)) }}
        {% else %}
          {{ '-1' }}
        {% endif %}
      icon: mdi:memory
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "ApacheGuacamole Memory Usage Percentage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('ApacheGuacamole_mem_perc', 'Unavailable') is number %}
          {{ value_json.get('ApacheGuacamole_mem_perc', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:percent
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "PhotoPrism CPU Usage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('photoprism_cpu_usage', 'Unavailable') is number %}
          {{ value_json.get('photoprism_cpu_usage', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:cpu-64-bit
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "PhotoPrism Memory Usage"
      unit_of_measurement: 'GB'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% set mem_usage = value_json.get('PhotoPrism_mem_usage', 'unavailable') %}
        {% set value = mem_usage | regex_replace('([^0-9.]+)', '') | float(0) %}
        {% set unit = mem_usage | regex_replace('([0-9.]+)', '') %}
        {% if unit == 'MiB' %}
          {{ '%0.3f' | format(value / 1024) }}
        {% elif unit == 'GiB' %}
          {{ '%0.3f' | format(value) }}
        {% elif unit == 'KiB' %}
          {{ '%0.3f' | format(value / (1024 * 1024)) }}
        {% elif unit == 'B' %}
          {{ '%0.3f' | format(value / (1024 * 1024 * 1024)) }}
        {% else %}
          {{ '-1' }}
        {% endif %}
      icon: mdi:memory
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "PhotoPrism Memory Usage Percentage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('photoprism_mem_perc', 'Unavailable') is number %}
          {{ value_json.get('photoprism_mem_perc', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:percent
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "OneDrive CPU Usage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('onedrive_cpu_usage', 'Unavailable') is number %}
          {{ value_json.get('onedrive_cpu_usage', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:cpu-64-bit
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "OneDrive Memory Usage"
      unit_of_measurement: 'GB'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% set mem_usage = value_json.get('Onedrive_mem_usage', '0B') %}
        {% set value = mem_usage | regex_replace('([^0-9.]+)', '') | float(0) %}
        {% set unit = mem_usage | regex_replace('([0-9.]+)', '') %}
        {% if unit == 'MiB' %}
          {{ '%0.3f' | format(value / 1024) }}
        {% elif unit == 'GiB' %}
          {{ '%0.3f' | format(value) }}
        {% elif unit == 'KiB' %}
          {{ '%0.3f' | format(value / (1024 * 1024)) }}
        {% elif unit == 'B' %}
          {{ '%0.3f' | format(value / (1024 * 1024 * 1024)) }}
        {% else %}
          {{ '-1' }}
        {% endif %}
      icon: mdi:memory
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "OneDrive Memory Usage Percentage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('onedrive_mem_perc', 'Unavailable') is number %}
          {{ value_json.get('onedrive_mem_perc', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:percent
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"

  - sensor:
      name: "HDDTemp CPU Usage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('hddtemp_cpu_usage', 'Unavailable') is number %}
          {{ value_json.get('hddtemp_cpu_usage', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:cpu-64-bit
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "HDDTemp Memory Usage"
      unit_of_measurement: 'GB'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% set mem_usage = value_json.get('hddtemp_mem_usage', '0B') %}
        {% set value = mem_usage | regex_replace('([^0-9.]+)', '') | float(0) %}
        {% set unit = mem_usage | regex_replace('([0-9.]+)', '') %}
        {% if unit == 'MiB' %}
          {{ '%0.3f' | format(value / 1024) }}
        {% elif unit == 'GiB' %}
          {{ '%0.3f' | format(value) }}
        {% elif unit == 'KiB' %}
          {{ '%0.3f' | format(value / (1024 * 1024)) }}
        {% elif unit == 'B' %}
          {{ '%0.3f' | format(value / (1024 * 1024 * 1024)) }}
        {% else %}
          {{ '-1' }}
        {% endif %}
      icon: mdi:memory
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "HDDTemp Memory Usage Percentage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('hddtemp_mem_perc', 'Unavailable') is number %}
          {{ value_json.get('hddtemp_mem_perc', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:percent
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"

  - sensor:
      name: "Glances CPU Usage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('glances_cpu_usage', 'Unavailable') is number %}
          {{ value_json.get('glances_cpu_usage', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:cpu-64-bit
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "Glances Memory Usage"
      unit_of_measurement: 'GB'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% set mem_usage = value_json.get('glances_mem_usage', '0B') %}
        {% set value = mem_usage | regex_replace('([^0-9.]+)', '') | float(0) %}
        {% set unit = mem_usage | regex_replace('([0-9.]+)', '') %}
        {% if unit == 'MiB' %}
          {{ '%0.3f' | format(value / 1024) }}
        {% elif unit == 'GiB' %}
          {{ '%0.3f' | format(value) }}
        {% elif unit == 'KiB' %}
          {{ '%0.3f' | format(value / (1024 * 1024)) }}
        {% elif unit == 'B' %}
          {{ '%0.3f' | format(value / (1024 * 1024 * 1024)) }}
        {% else %}
          {{ '-1' }}
        {% endif %}
      icon: mdi:memory
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "Glances Memory Usage Percentage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('glances_mem_perc', 'Unavailable') is number %}
          {{ value_json.get('glances_mem_perc', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:percent
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"

  - sensor:
      name: "NTP CPU Usage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('ntp_cpu_usage', 'Unavailable') is number %}
          {{ value_json.get('ntp_cpu_usage', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:cpu-64-bit
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "NTP Memory Usage"
      unit_of_measurement: 'GB'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% set mem_usage = value_json.get('ntp_mem_usage', '0B') %}
        {% set value = mem_usage | regex_replace('([^0-9.]+)', '') | float(0) %}
        {% set unit = mem_usage | regex_replace('([0-9.]+)', '') %}
        {% if unit == 'MiB' %}
          {{ '%0.3f' | format(value / 1024) }}
        {% elif unit == 'GiB' %}
          {{ '%0.3f' | format(value) }}
        {% elif unit == 'KiB' %}
          {{ '%0.3f' | format(value / (1024 * 1024)) }}
        {% elif unit == 'B' %}
          {{ '%0.3f' | format(value / (1024 * 1024 * 1024)) }}
        {% else %}
          {{ '-1' }}  # Fallback in case unit is not recognized
        {% endif %}
      icon: mdi:memory
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "NTP Memory Usage Percentage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('ntp_mem_perc', 'Unavailable') is number %}
          {{ value_json.get('ntp_mem_perc', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:percent
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"

  - sensor:
      name: "SWAG CPU Usage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('swag_cpu_usage', 'Unavailable') is number %}
          {{ value_json.get('swag_cpu_usage', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:cpu-64-bit
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "SWAG Memory Usage"
      unit_of_measurement: 'GB'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% set mem_usage = value_json.get('swag_mem_usage', '0B') %}
        {% set value = mem_usage | regex_replace('([^0-9.]+)', '') | float(0) %}
        {% set unit = mem_usage | regex_replace('([0-9.]+)', '') %}
        {% if unit == 'MiB' %}
          {{ '%0.3f' | format(value / 1024) }}
        {% elif unit == 'GiB' %}
          {{ '%0.3f' | format(value) }}
        {% elif unit == 'KiB' %}
          {{ '%0.3f' | format(value / (1024 * 1024)) }}
        {% elif unit == 'B' %}
          {{ '%0.3f' | format(value / (1024 * 1024 * 1024)) }}
        {% else %}
          {{ '-1' }}
        {% endif %}
      icon: mdi:memory
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"
  - sensor:
      name: "SWAG Memory Usage Percentage"
      unit_of_measurement: '%'
      command: "cat /config/www/nas_status.json"
      value_template: >
        {% if value_json.get('swag_mem_perc', 'Unavailable') is number %}
          {{ value_json.get('swag_mem_perc', 'Unavailable') }}
        {% else %}
          -1
        {% endif %}
      icon: mdi:percent
      availability: "{{ is_state('binary_sensor.nas_ssh_reachability', 'on') }}"

#################
#    SENSORS    #
#################
sensor:


########################
#    BINARY SENSORS    #
########################
binary_sensor:

##################
#    SWITCHES    #
##################
switch:
  platform: wake_on_lan
  name: BlokmeisterNAS
  host: 10.0.0.250
  mac: "BC:5F:F4:8B:7A:9E"
  turn_off:
    service: rest_command.nas_shutdown
#####################
#    AUTOMATIONS    #
#####################
automation:
  - alias: "[system|network]Enter Work Zone - Start Containers"
    description: "Turns on Guacamole and Firefox containers when entering work zone."
    trigger:
      - platform: zone
        entity_id: person.sander_blok
        zone: zone.work
        event: enter
      - platform: state
        entity_id:
          - device_tracker.worklaptop_dock
          - device_tracker.worklaptop_wifi
        from: "not_home"
        to: "home"
        for:
          minutes: 2
      #can also be used to trigger container start/stop
      # - platform: state
      #   entity_id: device_tracker.worklaptop_wifi
      #   to: home
      # - platform: state
      #   entity_id: device_tracker.worklaptop_dock
      #   to: home
    action:
      - service: switch.turn_on
        target:
          entity_id:
            # - switch.unifi_network_guac_http
            - switch.swag_container
            - switch.apache_guacamole_container
            - switch.firefox_container
            - switch.unifi_network_swag_http_https
            - switch.unifi_network_swag_https
      - wait_for_trigger:
          - platform: zone
            entity_id: person.sander_blok
            zone: zone.work
            event: leave
          - platform: template
            value_template: "{{ is_state('device_tracker.worklaptop_dock', 'not_home') and is_state('device_tracker.worklaptop_wifi', 'not_home') }}"
            for:
              minutes: 15
        timeout:
          hours: 12
        continue_on_timeout: false
      - service: switch.turn_off
        entity_id:
          # - switch.unifi_network_guac_http
          - switch.swag_container
          - switch.apache_guacamole_container
          - switch.firefox_container
          - switch.unifi_network_swag_http_https
          - switch.unifi_network_swag_https
    mode: single

  - alias: "[system|network]Query NAS sensors"
    mode: single
    description: "Automatically queries the sensors in the NAS using a bash script every minute."
    trigger:
      - platform: time_pattern
        minutes: "/1"
    action:
      - service: shell_command.execute_nas_monitor_commands
      - delay:
          seconds: 5
      - service: homeassistant.update_entity
        data:
          entity_id:
            - binary_sensor.nas_ssh_reachability
            - sensor.nas_cpu_usage_file
            - sensor.nas_cpu_temperature_file
            - sensor.nas_total_memory_file
            - sensor.nas_used_memory_file
            - sensor.nas_used_disk_space_file
            - sensor.nas_nvme_composite_temperature_file
            - sensor.nas_parity_temperature_file
            - sensor.nas_disk_1_temperature_file
            - sensor.nas_disk_2_temperature_file
            - sensor.nas_disk_3_temperature_file
            - sensor.nas_dev_1_temperature_file
            - sensor.nas_dev_2_temperature_file
            - switch.transmission_container
            - switch.plex_container
            - switch.portainer_ce_container
            - switch.firefox_container
            - switch.apache_guacamole_container
            - switch.photoprism_container
            - switch.onedrive_container
            - switch.nas_unraid_array
            - switch.nas_wireguard_service
            - sensor.transmission_cpu_usage
            - sensor.transmission_memory_usage
            - sensor.transmission_memory_usage_percentage
            - sensor.plex_cpu_usage
            - sensor.plex_memory_usage
            - sensor.plex_memory_usage_percentage
            # - sensor.portainer_ce_cpu_usage
            # - sensor.portainer_ce_memory_usage
            # - sensor.portainer_ce_memory_usage_percentage
            - sensor.firefox_cpu_usage
            - sensor.firefox_memory_usage
            - sensor.firefox_memory_usage_percentage
            - sensor.apacheguacamole_cpu_usage
            - sensor.apacheguacamole_memory_usage
            - sensor.apacheguacamole_memory_usage_percentage
            - sensor.photoprism_cpu_usage
            - sensor.photoprism_memory_usage
            - sensor.photoprism_memory_usage_percentage
            - sensor.onedrive_cpu_usage
            - sensor.onedrive_memory_usage
            - sensor.onedrive_memory_usage_percentage
            - sensor.hddtemp_cpu_usage
            - sensor.hddtemp_memory_usage
            - sensor.hddtemp_memory_usage_percentage
            - sensor.glances_cpu_usage
            - sensor.glances_memory_usage
            - sensor.glances_memory_usage_percentage
            - sensor.ntp_cpu_usage
            - sensor.ntp_memory_usage
            - sensor.ntp_memory_usage_percentage
            - sensor.swag_cpu_usage
            - sensor.swag_memory_usage
            - sensor.swag_memory_usage_percentage
            - switch.hddtemp_container
            - switch.glances_container
            - switch.ntp_container
            - switch.swag_container

  - alias: 'Completed Torrent'
    trigger:
      platform: event
      event_type: transmission_downloaded_torrent
    action:
      service: notify.mobile_app_blokmeisters21u
      data:
        title: "Torrent completed!"
        message: "{{ trigger.event.data.name }} has finished downloading!"
        data:
          group: reminder
          tag: transmission
          icon_url: "https://upload.wikimedia.org/wikipedia/commons/6/6d/Transmission_icon.png"
          timeout: 1800

  - alias: "[system|nas]Link Speed Alert"
    trigger:
      - platform: numeric_state
        entity_id: sensor.nas_link_speed
        below: 9000
        for:
          minutes: 10
    action:
      - service: persistent_notification.create
        data:
          title: "Network Speed Alert"
          message: "Warning: Network speed has dropped below 9000 Mb/s."
          notification_id: "network_speed_alert"
      - wait_for_trigger:
          - platform: numeric_state
            entity_id: sensor.nas_link_speed
            above: 9000
      - service: persistent_notification.dismiss
        data:
          notification_id: "network_speed_alert"

################
#    SCENES    #
################
scene:

################
#    GROUPS    #
################
group:
  container_sensors_switches:
    name: "NAS Container Sensors and Switches"
    entities:
      - switch.transmission_container
      - switch.plex_container
      - switch.portainer_ce_container
      - switch.firefox_container
      - switch.apache_guacamole_container
      - switch.photoprism_container
      - switch.onedrive_container
      - switch.hddtemp_container
      - switch.glances_container
      - switch.ntp_container
      - switch.swag_container
      - sensor.transmission_cpu_usage
      - sensor.transmission_memory_usage
      - sensor.transmission_memory_usage_percentage
      - sensor.plex_cpu_usage
      - sensor.plex_memory_usage
      - sensor.plex_memory_usage_percentage
      - sensor.portainer_ce_cpu_usage
      - sensor.portainer_ce_memory_usage
      - sensor.portainer_ce_memory_usage_percentage
      - sensor.firefox_cpu_usage
      - sensor.firefox_memory_usage
      - sensor.firefox_memory_usage_percentage
      - sensor.apacheguacamole_cpu_usage
      - sensor.apacheguacamole_memory_usage
      - sensor.apacheguacamole_memory_usage_percentage
      - sensor.photoprism_cpu_usage
      - sensor.photoprism_memory_usage
      - sensor.photoprism_memory_usage_percentage
      - sensor.onedrive_cpu_usage
      - sensor.onedrive_memory_usage
      - sensor.onedrive_memory_usage_percentage
      - sensor.hddtemp_cpu_usage
      - sensor.hddtemp_memory_usage
      - sensor.hddtemp_memory_usage_percentage
      - sensor.glances_cpu_usage
      - sensor.glances_memory_usage
      - sensor.glances_memory_usage_percentage
      - sensor.ntp_cpu_usage
      - sensor.ntp_memory_usage
      - sensor.ntp_memory_usage_percentage
      - sensor.swag_cpu_usage
      - sensor.swag_memory_usage
      - sensor.swag_memory_usage_percentage
  nas_status_sensors:
    name: "NAS Status Sensors"
    entities:
      - sensor.nas_cpu_usage_file
      - sensor.nas_cpu_temperature_file
      - sensor.nas_total_memory_file
      - sensor.nas_used_memory_file
      - sensor.nas_used_disk_space_file
      - sensor.nas_nvme_composite_temperature_file
      - sensor.nas_parity_temperature_file
      - sensor.nas_disk_1_temperature_file
      - sensor.nas_disk_2_temperature_file
      - sensor.nas_disk_3_temperature_file
      - sensor.nas_dev_1_temperature_file
      - sensor.nas_dev_2_temperature_file
      - binary_sensor.nas_ssh_reachability
      - switch.nas_unraid_array
      - switch.nas_wireguard_service
  airvpn_status:
    name: "AirVPN Status"
    entities:
      - switch.nas_wireguard_service
      - sensor.airvpn_exit_ip
      - sensor.airvpn_username
      - sensor.airvpn_vpn_ip
      - sensor.airvpn_exit_ip
      - sensor.airvpn_entry_ip
      - sensor.airvpn_server_name
      - sensor.airvpn_server_country
      - sensor.airvpn_data_uploaded
      - sensor.airvpn_data_downloaded
      - sensor.airvpn_connected_since
      - sensor.airvpn_upload_speed
      - sensor.airvpn_download_speed

#################
#    SCRIPTS    #
#################
script:

#######################
#    SHELL COMMAND    #
#######################
shell_command:
  execute_nas_monitor_commands: sh /config/bash_scripts/nas_monitor.sh
