# Quality Scale for Unraid Integration
# https://developers.home-assistant.io/docs/core/integration-quality-scale/

rules:
  # ============================================================================
  # ü•â Bronze (Minimum requirements for all integrations)
  # ============================================================================

  # Service actions are registered in async_setup
  action-setup:
    status: exempt
    comment: Integration does not register custom service actions.

  # If it's a polling integration, set an appropriate polling interval
  appropriate-polling: done

  # Has branding assets available for the integration
  brands:
    status: exempt
    comment: Custom integration not in Home Assistant core, branding not applicable.

  # Place common patterns in common modules
  common-modules: done

  # Full test coverage for the config flow
  config-flow-test-coverage: done

  # Integration needs to be able to be set up via the UI
  config-flow: done

  # Dependency transparency
  dependency-transparency: done

  # The documentation describes the provided service actions that can be used
  docs-actions:
    status: exempt
    comment: Integration does not provide custom service actions.

  # The documentation includes a high-level description
  docs-high-level-description:
    status: todo
    comment: README needs improvement with high-level description.

  # The documentation provides step-by-step installation instructions
  docs-installation-instructions:
    status: todo
    comment: README needs HACS installation instructions.

  # The documentation provides removal instructions
  docs-removal-instructions:
    status: todo
    comment: README needs removal instructions.

  # Entity events are subscribed in the correct lifecycle methods
  entity-event-setup:
    status: exempt
    comment: Integration uses coordinators for data updates, no direct event subscriptions.

  # Entities have a unique ID
  entity-unique-id: done

  # Entities use has_entity_name = True
  has-entity-name: done

  # Use ConfigEntry.runtime_data to store runtime data
  runtime-data: done

  # Test a connection in the config flow
  test-before-configure: done

  # Check during integration initialization if we are able to set it up correctly
  test-before-setup: done

  # Don't allow the same device or service to be set up twice
  unique-config-entry: done

  # ============================================================================
  # ü•à Silver (Improved reliability and robustness)
  # ============================================================================

  # Service actions raise exceptions when encountering failures
  action-exceptions:
    status: exempt
    comment: Integration does not provide custom service actions.

  # Support config entry unloading
  config-entry-unloading: done

  # The documentation describes all integration configuration options
  docs-configuration-parameters:
    status: todo
    comment: Need to document options flow parameters.

  # The documentation describes all integration installation parameters
  docs-installation-parameters:
    status: todo
    comment: Need to document config flow parameters.

  # Mark entity unavailable if appropriate
  entity-unavailable: done

  # Has an integration owner
  integration-owner: done

  # Log once when unavailable and once when back connected
  log-when-unavailable: done

  # Number of parallel updates is specified
  parallel-updates: done

  # Reauthentication needs to be available via the UI
  reauthentication-flow: done

  # Above 95% test coverage for all integration modules
  test-coverage:
    status: todo
    comment: Current coverage is 63%, need to improve to 95%.

  # ============================================================================
  # ü•á Gold (Best user experience)
  # ============================================================================

  # The integration creates devices
  devices: done

  # Implements diagnostics
  diagnostics: done

  # Integration uses discovery info to update network information
  discovery-update-info:
    status: exempt
    comment: Unraid servers do not support network discovery protocols.

  # Devices can be discovered
  discovery:
    status: exempt
    comment: Unraid servers do not support SSDP/mDNS/DHCP discovery.

  # The documentation describes how data is updated
  docs-data-update:
    status: todo
    comment: Need to document polling intervals and data refresh.

  # The documentation provides automation examples
  docs-examples:
    status: todo
    comment: Need to add automation examples to documentation.

  # The documentation describes known limitations
  docs-known-limitations:
    status: todo
    comment: Need to document known limitations.

  # The documentation describes known supported / unsupported devices
  docs-supported-devices:
    status: exempt
    comment: Integration supports all Unraid 7.2+ servers uniformly.

  # The documentation describes the supported functionality
  docs-supported-functions:
    status: todo
    comment: Need to document all entities and platforms.

  # The documentation provides troubleshooting information
  docs-troubleshooting:
    status: todo
    comment: Need to add troubleshooting section.

  # The documentation describes use cases
  docs-use-cases:
    status: todo
    comment: Need to add use case examples.

  # Devices added after integration setup
  dynamic-devices: done

  # Entities are assigned an appropriate EntityCategory
  entity-category: done

  # Entities use device classes where possible
  entity-device-class: done

  # Integration disables less popular (or noisy) entities
  entity-disabled-by-default: done

  # Entities have translated names
  entity-translations: done

  # Exception messages are translatable
  exception-translations:
    status: todo
    comment: Need to add translation keys for exception messages.

  # Entities implement icon translations
  icon-translations:
    status: done
    comment: |
      icons.json defines icons for all entities using translation keys.
      All entity classes use _attr_translation_key to map to icons.

  # Integrations should have a reconfigure flow
  reconfiguration-flow: done

  # Repair issues and repair flows are used when user intervention is needed
  repair-issues: done

  # Stale devices are removed
  stale-devices:
    status: exempt
    comment: |
      Integration has a single device per server. Containers, VMs, and disks are
      entities, not devices. Main device persists as long as integration is configured.

  # ============================================================================
  # üèÜ Platinum (Highest standards)
  # ============================================================================

  # Dependency is async
  async-dependency: done

  # The integration dependency supports passing in a websession
  inject-websession:
    status: todo
    comment: API client creates its own session, should accept injected session.

  # Strict typing
  strict-typing:
    status: todo
    comment: Need to add py.typed marker and ensure full type coverage.
